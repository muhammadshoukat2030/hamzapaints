<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Items | Hamza Paints</title>
    <link rel="stylesheet" href="/stylesheets/addDynamicData.css"> <style>
        .data-table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        .data-table th, .data-table td { padding: 12px; border: 1px solid #eee; text-align: left; }
        .data-table th { background-color: #06a56c; color: white; }
        .brand-row { background-color: #f9f9f9; font-weight: bold; color: #06a56c; }
        .tag { display: inline-block; background: #e8f5e9; color: #2e7d32; padding: 2px 8px; border-radius: 4px; margin: 2px; font-size: 12px; border: 1px solid #a5d6a7; }
        .unit-tag { background: #e3f2fd; color: #1565c0; border-color: #bbdefb; }
    </style>
</head>
<body>
    <%- include('partials/navbar') %>
    <main>
        <div class="create-item-container">
            <h2>All Item Definitions</h2>
            
            <% if (allDefinitions.length > 0) { %>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Brand & Units</th>
                            <th>Product Name</th>
                            <th>Colors & Codes</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% allDefinitions.forEach(brand => { %>
                            <tr class="brand-row">
                                <td colspan="4">
                                    BRAND: <%= brand.brandName.toUpperCase() %> 
                                    <span style="margin-left:20px; font-weight:normal; color:#666;">
                                        Units: <% brand.units.forEach(u => { %>
                                            <span class="tag unit-tag"><%= u %></span>
                                        <% }) %>
                                    </span>
                                </td>
                            </tr>
                            
                            <% brand.products.forEach(product => { %>
                                <tr>
                                    <td></td> <td><strong><%= product.itemName %></strong></td>
                                    <td>
                                        <% if(product.hasColors && product.colors.length > 0) { %>
                                            <% product.colors.forEach(c => { %>
                                                <span class="tag"><%= c.colour %> (<%= c.code %>)</span>
                                            <% }) %>
                                        <% } else { %>
                                            <span style="color: #ccc;">No Colors</span>
                                        <% } %>
                                    </td>
                                    <td>
                                        <button class="tag" style="background:#fff3e0; color:#ef6c00; border-color:#ffe0b2; cursor:pointer;">Edit</button>
                                        <button class="tag" style="background:#ffebee; color:#c62828; border-color:#ffcdd2; cursor:pointer;">Delete</button>
                                    </td>
                                </tr>
                            <% }) %>
                        <% }) %>
                    </tbody>
                </table>
            <% } else { %>
                <p>No data found. <a href="/dynamic/add">Add New Item</a></p>
            <% } %>
        </div>
    </main>
</body>
</html>