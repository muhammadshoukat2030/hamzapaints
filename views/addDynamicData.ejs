<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Add Dynamic Data | Hamza Paints</title>
  <link rel="icon" href="/images/weldon-paints-logo.png" type="image/png">
  <link rel="stylesheet" href="/stylesheets/addDynamicData.css">
  <script src="/javascripts/addDynamicData.js" defer></script>
  <style>
    .section-header { display: flex; align-items: center; cursor: pointer; background: #f1f1f1; padding: 10px; border-radius: 4px; margin-top: 15px; user-select: none; border: 1px solid #ddd; }
    .toggle-icon { margin-right: 15px; font-size: 12px; transition: transform 0.3s ease; font-weight: bold; }
    .collapsed .toggle-icon { transform: rotate(-90deg); }
    .collapsible-content { padding: 15px; border: 1px solid #ddd; border-top: none; display: none; }
    .item-entry { background: #fafafa; padding: 10px; border: 1px dashed #ccc; margin-bottom: 10px; border-radius: 4px; position: relative; }
    .remove-btn { color: red; cursor: pointer; font-weight: bold; border: none; background: none; }
    #addMoreItemsBtn { background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; margin-top: 5px; }
  </style>
</head>
<body>
  <%- include('partials/navbar') %>
  <main>
    <div class="create-item-container">
      <h2>Add Data</h2>
      <div class="form-card">
        
        <div class="section">
          <label><b>Select Brand</b></label>
          <select id="brandSelect" style="width: 100%; margin-top: 5px;">
            <option value="">Select Brand</option>
            <option value="NEW_BRAND" style="font-weight: bold; color: #06a56c;">+ Add New Brand</option>
            <option disabled>──────────</option>
            <% if (brands && brands.length > 0) { %>
              <% brands.forEach(brand => { %>
                <option value="<%= brand %>"><%= brand %></option>
              <% }) %>
            <% } %>
          </select>
          <input type="text" id="newBrandInput" placeholder="Enter New Brand Name" style="display:none; margin-top: 10px; width: 100%;">
        </div>

        <div class="section" style="margin-top: 20px;">
          <label><b>Select Items</b></label>
          <div id="itemRowsContainer" style="margin-top: 10px;">
            <div class="item-entry">
              <select class="itemSelect" style="width: 100%;">
                <option value="">Select Item</option>
                <option value="NEW_ITEM" style="font-weight: bold; color: #06a56c;">+ Add New Item</option>
                <option disabled>──────────</option>
              </select>
              <input type="text" class="itemNameInput" placeholder="Enter New Item Name" style="display:none; margin-top: 10px; width: 100%;">
            </div>
          </div>
          <button type="button" id="addMoreItemsBtn">+ Add Another Item</button>
          <p id="multiItemWarning" style="color: #d9534f; font-size: 12px; display: none; margin-top: 10px;">⚠️ Note: Multiple items add karte waqt colors add nahi honge.</p>
        </div>

        <div class="section" id="colorsWrapper">
          <div class="section-header collapsed" id="colorHeader">
            <span class="toggle-icon">▼</span>
            <h4>Colors & Codes</h4>
          </div>
          <div id="colorContainer" class="collapsible-content">
            <div id="colorRows">
              <div class="color-row">
                <input type="text" class="color-name" placeholder="Color Name">
                <input type="text" class="color-code" placeholder="Code">
              </div>
            </div>
            <button type="button" id="addColorBtn" style="margin-top: 10px;">+ Add More Color</button>
          </div>
        </div>

        <div class="section">
          <div class="section-header collapsed" id="unitHeader">
            <span class="toggle-icon">▼</span>
            <h4>Units</h4>
          </div>
          <div id="unitContainer" class="collapsible-content">
            <div id="unitRows">
              <div class="unit-row">
                <input type="text" class="unit-name" placeholder="Unit (e.g. Gallon)">
              </div>
            </div>
            <button type="button" id="addUnitBtn" style="margin-top: 10px;">+ Add More Unit</button>
          </div>
        </div>

        <div class="actions" style="margin-top: 20px;">
          <button type="button" class="btn-save" id="submitBtn">Submit & Save</button>
        </div>
      </div>
    </div>
  </main>
</body>
</html>